# Binshops REST API Module para PrestaShop

## Descripci√≥n General

El **Binshops REST API Module** es una soluci√≥n de terceros que proporciona endpoints REST modernos para PrestaShop, especialmente dise√±ado para aplicaciones headless, PWAs y aplicaciones m√≥viles.

## Caracter√≠sticas Principales

### ‚ú® Funcionalidades
- ‚úÖ **Sin configuraci√≥n**: Se instala y funciona inmediatamente
- ‚úÖ **Compatible con PrestaShop 8.x**
- ‚úÖ **Routing basado en anotaciones**
- ‚úÖ **APIs tanto para front-end como admin**
- ‚úÖ **Soporte para comercio headless**
- ‚úÖ **Documentaci√≥n completa en Postman**

### üéØ Casos de Uso
- Progressive Web Apps (PWA) para PrestaShop
- Aplicaciones m√≥viles nativas
- Integraciones headless commerce
- APIs para aplicaciones front-end modernas (React, Vue, Angular)

## Versiones Disponibles

### v5.x - Versi√≥n Oficial Soportada
- **Compatibilidad**: PrestaShop 8.x
- **√öltima versi√≥n**: v5.4.0 (Enero 2025)\n- **Caracter√≠sticas**: APIs completas de admin y front-end\n- **Soporte**: Comercial\n- **Uso**: Producci√≥n recomendada\n\n### v2.5 - Versi√≥n Gratuita\n- **Prop√≥sito**: Demo y testing\n- **Limitaciones**: No recomendada para producci√≥n\n- **Acceso**: GitHub p√∫blico\n\n## Instalaci√≥n\n\n### Requisitos Previos\n\n#### M√≥dulos Nativos de PrestaShop Requeridos\n```\n‚úì ps_mainmenu\n‚úì ps_featuredproducts\n‚úì ps_facetedsearch\n‚úì productcomments\n‚úì ps_banner\n‚úì ps_imageslider\n‚úì ps_wirepayment\n‚úì ps_checkpayment\n‚úì blockwishlist\n```\n\n### Proceso de Instalaci√≥n\n\n1. **Descarga del M√≥dulo**\n   ```bash\n   # Versi√≥n gratuita (testing)\n   git clone https://github.com/binshops/prestashop-rest.git\n   ```\n\n2. **Instalaci√≥n en PrestaShop**\n   - Subir el m√≥dulo al directorio `/modules/`\n   - Acceder al Back Office ‚Üí M√≥dulos\n   - Buscar \"Binshops REST API\"\n   - Instalar y configurar\n\n3. **Verificaci√≥n**\n   ```bash\n   curl -X GET \"http://tudominio.com/rest\"\n   ```\n\n## Configuraci√≥n\n\n### URL Base de la API\n```\nhttp://tudominio.com/rest/\n```\n\n### Estructura de Routing\n\nEl m√≥dulo utiliza anotaciones PHP para definir rutas:\n\n```php\n/**\n * @Route(\"/rest/get-products\", name=\"products\")\n */\npublic function getProducts()\n{\n    // L√≥gica del endpoint\n    return $this->json([\n        'products' => $products,\n        'status' => 'success'\n    ]);\n}\n```\n\n## Endpoints Disponibles\n\n### üõçÔ∏è Cat√°logo de Productos\n\n| Endpoint | M√©todo | Descripci√≥n |\n|----------|--------|-------------|\n| `/rest/products` | GET | Lista de productos |\n| `/rest/products/{id}` | GET | Producto espec√≠fico |\n| `/rest/categories` | GET | Categor√≠as |\n| `/rest/manufacturers` | GET | Fabricantes |\n| `/rest/featured-products` | GET | Productos destacados |\n\n### üë§ Gesti√≥n de Usuarios\n\n| Endpoint | M√©todo | Descripci√≥n |\n|----------|--------|-------------|\n| `/rest/customers` | GET | Lista de clientes |\n| `/rest/customer/{id}` | GET | Cliente espec√≠fico |\n| `/rest/register` | POST | Registro de cliente |\n| `/rest/login` | POST | Autenticaci√≥n |\n\n### üõí Carrito y Pedidos\n\n| Endpoint | M√©todo | Descripci√≥n |\n|----------|--------|-------------|\n| `/rest/cart` | GET | Carrito actual |\n| `/rest/cart/add` | POST | Agregar al carrito |\n| `/rest/orders` | GET | Pedidos del cliente |\n| `/rest/checkout` | POST | Procesar pedido |\n\n### üí≥ Pagos y Env√≠os\n\n| Endpoint | M√©todo | Descripci√≥n |\n|----------|--------|-------------|\n| `/rest/payment-methods` | GET | M√©todos de pago |\n| `/rest/shipping-methods` | GET | M√©todos de env√≠o |\n| `/rest/countries` | GET | Pa√≠ses disponibles |\n\n## Ejemplos de Uso\n\n### JavaScript (Frontend)\n\n```javascript\nclass BinshopsAPI {\n    constructor(baseUrl) {\n        this.baseUrl = baseUrl.replace(/\\/$/, '');\n    }\n    \n    async getProducts(filters = {}) {\n        const params = new URLSearchParams(filters);\n        const response = await fetch(`${this.baseUrl}/rest/products?${params}`);\n        return response.json();\n    }\n    \n    async getProduct(id) {\n        const response = await fetch(`${this.baseUrl}/rest/products/${id}`);\n        return response.json();\n    }\n    \n    async addToCart(productId, quantity = 1) {\n        const response = await fetch(`${this.baseUrl}/rest/cart/add`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                product_id: productId,\n                quantity: quantity\n            })\n        });\n        return response.json();\n    }\n    \n    async registerCustomer(customerData) {\n        const response = await fetch(`${this.baseUrl}/rest/register`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(customerData)\n        });\n        return response.json();\n    }\n}\n\n// Uso\nconst api = new BinshopsAPI('https://mitienda.com');\n\n// Obtener productos\napi.getProducts({ category: 5, limit: 12 })\n    .then(products => {\n        console.log('Productos:', products);\n    });\n\n// Agregar al carrito\napi.addToCart(123, 2)\n    .then(result => {\n        console.log('Producto agregado:', result);\n    });\n```\n\n### React Hook Personalizado\n\n```javascript\nimport { useState, useEffect } from 'react';\n\n// Hook personalizado para productos\nfunction useProducts(filters = {}) {\n    const [products, setProducts] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    \n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                setLoading(true);\n                const api = new BinshopsAPI(process.env.REACT_APP_SHOP_URL);\n                const data = await api.getProducts(filters);\n                setProducts(data.products || []);\n            } catch (err) {\n                setError(err.message);\n            } finally {\n                setLoading(false);\n            }\n        };\n        \n        fetchProducts();\n    }, [JSON.stringify(filters)]);\n    \n    return { products, loading, error };\n}\n\n// Componente de productos\nfunction ProductList({ categoryId }) {\n    const { products, loading, error } = useProducts({ category: categoryId });\n    \n    if (loading) return <div>Cargando productos...</div>;\n    if (error) return <div>Error: {error}</div>;\n    \n    return (\n        <div className=\"products-grid\">\n            {products.map(product => (\n                <div key={product.id} className=\"product-card\">\n                    <h3>{product.name}</h3>\n                    <p>${product.price}</p>\n                    <button onClick={() => addToCart(product.id)}>\n                        Agregar al Carrito\n                    </button>\n                </div>\n            ))}\n        </div>\n    );\n}\n```\n\n### Vue.js Composable\n\n```javascript\n// composables/useBinshopsAPI.js\nimport { ref, reactive } from 'vue'\n\nexport function useBinshopsAPI(baseUrl) {\n    const loading = ref(false)\n    const error = ref(null)\n    \n    const api = reactive({\n        async getProducts(filters = {}) {\n            loading.value = true\n            error.value = null\n            \n            try {\n                const params = new URLSearchParams(filters)\n                const response = await fetch(`${baseUrl}/rest/products?${params}`)\n                const data = await response.json()\n                return data\n            } catch (err) {\n                error.value = err.message\n                throw err\n            } finally {\n                loading.value = false\n            }\n        },\n        \n        async addToCart(productId, quantity = 1) {\n            loading.value = true\n            error.value = null\n            \n            try {\n                const response = await fetch(`${baseUrl}/rest/cart/add`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ product_id: productId, quantity })\n                })\n                return await response.json()\n            } catch (err) {\n                error.value = err.message\n                throw err\n            } finally {\n                loading.value = false\n            }\n        }\n    })\n    \n    return {\n        api,\n        loading,\n        error\n    }\n}\n```\n\n## Ventajas vs API Oficial\n\n### üü¢ Ventajas de Binshops REST\n- **Endpoints modernos**: Dise√±ados para aplicaciones SPA/PWA\n- **Sin configuraci√≥n compleja**: Instalaci√≥n plug-and-play\n- **Mejor documentaci√≥n**: Postman collection completa\n- **Orientado a frontend**: APIs optimizadas para JavaScript\n- **Soporte activo**: Actualizaciones regulares\n\n### üü° Limitaciones\n- **M√≥dulo de terceros**: Dependencia externa\n- **Versi√≥n gratuita limitada**: Funcionalidades reducidas\n- **Compatibilidad**: Solo PrestaShop 8.x\n- **Curva de aprendizaje**: Diferentes patrones que API oficial\n\n## Migraci√≥n desde API Oficial\n\n### Comparaci√≥n de Endpoints\n\n| Funcionalidad | API Oficial | Binshops REST |\n|---------------|-------------|---------------|\n| Obtener productos | `GET /api/products` | `GET /rest/products` |\n| Producto espec√≠fico | `GET /api/products/1` | `GET /rest/products/1` |\n| Agregar al carrito | N/A (complejo) | `POST /rest/cart/add` |\n| Autenticaci√≥n | Basic Auth | Token/Session |\n\n### Script de Migraci√≥n\n\n```javascript\n// Wrapper para migraci√≥n gradual\nclass PrestaShopAPIWrapper {\n    constructor(config) {\n        this.useOfficialAPI = config.useOfficialAPI || false;\n        this.officialAPI = new PrestaShopAPI(config.wsKey, config.shopUrl);\n        this.binshopsAPI = new BinshopsAPI(config.shopUrl);\n    }\n    \n    async getProducts(filters = {}) {\n        if (this.useOfficialAPI) {\n            return this.officialAPI.get('products', null, filters);\n        } else {\n            return this.binshopsAPI.getProducts(filters);\n        }\n    }\n    \n    // M√©todos adicionales...\n}\n```\n\n## Troubleshooting\n\n### Errores Comunes\n\n#### M√≥dulos Faltantes\n```\nError: Required module 'ps_mainmenu' not found\nSoluci√≥n: Instalar todos los m√≥dulos requeridos\n```\n\n#### Routing No Funciona\n```\nError: 404 on /rest/products\nSoluci√≥n: \n1. Verificar mod_rewrite activado\n2. Revisar .htaccess\n3. Limpiar cache de PrestaShop\n```\n\n#### CORS Issues\n```javascript\n// Configurar CORS en el m√≥dulo\nheader('Access-Control-Allow-Origin: *');\nheader('Access-Control-Allow-Methods: GET, POST, PUT, DELETE');\nheader('Access-Control-Allow-Headers: Content-Type, Authorization');\n```\n\n## Enlaces y Recursos\n\n- **GitHub**: https://github.com/binshops/prestashop-rest\n- **Documentaci√≥n Postman**: https://documenter.getpostman.com/view/1491681/TzkyP1UC\n- **Sitio Oficial**: https://www.binshops.com/prestashop-api\n- **Soporte**: GitHub Issues para versi√≥n gratuita\n\n---\n\n**Recomendaci√≥n**: Para proyectos nuevos que requieren APIs modernas para frontend, considerar Binshops REST. Para integraciones backend tradicionales, la API oficial puede ser suficiente.